function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}testWebP((function(e){!0===e?document.querySelector("html").classList.add("_webp"):document.querySelector("html").classList.add("_no-webp")}));const burger=document.querySelector(".burger"),nav=document.querySelector(".header__list"),burgerContainer=document.querySelector(".burgerContainer");async function getProducts(){let e=await fetch("json/products.json",{method:"GET"});if(e.ok){loadProducts(await e.json())}else alert("Ошибка")}function loadProducts(e){const t=document.querySelector(".swiper-wrapper");e.products.forEach((e=>{const i=e.id,r=e.url,o=e.image,n=e.title,s=e.price,c=e.priceOld,l=e.labels;let d=`<div data-pid="${i}" class="swiper-slide">`,a="";if(l){let e='<div class="item-product__labels">',t="</div>",i="";l.forEach((e=>{i+=`<div class="item-product__label item-product__label_${e.type}">${e.value}</div>`})),a+=e,a+=i,a+=t}let u="";u='<div class="item-product__prices">',u+=`<div class="item-product__price">Rp ${s}</div>`,c&&(u+=`<del class="item-product__price item-product__oldPrice">Rp ${c}</del>`),u+="</div>";let p="";p+=d,p+=` <a href="${r}" class="item-product__image">\n\t\t<img src="${o}" alt="${n}"></a>\n\t\t`,p+=`\n\t\t<p class="item-product__title">${n}</p>\n\t\t<p class="item-product__price">${s}</p>\n\t\t`,p+=u,p+='\n\t\t<div class="item-product__button">\n\t\t\t<button class="button-cart">В корзину</button>\n\t\t</div>\n\t\t',p+="</div>",t.insertAdjacentHTML("beforeend",p)}))}burger.onclick=function(){burger.classList.toggle("_active"),nav.classList.toggle("_active"),document.body.classList.toggle("_lock"),burgerContainer.classList.toggle("burgerContainer--right")},window.onload=function(){getProducts(),window.outerWidth>=windowTrigger&&(swiperInit(),setTimeout((function(){swiper.update(swiper)}),500))};let swiper=null,windowTrigger=768,swiperContainer=document.querySelector(".swiper-container");function swiperInit(){swiper||(swiper=new Swiper(".swiper-container",{slidesPerView:3,loop:!0,direction:"horizontal",spaceBetween:50,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},scrollbar:{el:".swiper-scrollbar"}}))}function swiperDestroy(){swiper&&(swiper.destroy(),swiper=null,console.log("spiwer destroyed"))}console.log(swiper),onresize=function(){window.innerWidth>=windowTrigger?swiperInit():swiperDestroy()};