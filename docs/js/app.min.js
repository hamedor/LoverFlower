function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}testWebP((function(e){!0===e?document.querySelector("html").classList.add("_webp"):document.querySelector("html").classList.add("_no-webp")}));const burger=document.querySelector(".burger"),nav=document.querySelector(".header__list"),burgerContainer=document.querySelector(".burgerContainer");async function getProducts(){let e=await fetch("json/products.json",{method:"GET"});if(e.ok){let t=await e.json();filterProducts(t),console.log(t)}}async function getProducts(){let e=await fetch("json/products.json",{method:"GET"});if(e.ok){loadProducts(await e.json())}}function loadProducts(e){const t=document.querySelector(".swiper-wrapper"),r=document.querySelector(".products-catalog");let i;e.products.forEach((e=>{const o=e.id,n=e.url,s=e.image,c=e.title,l=e.price,a=e.priceOld,d=e.labels;e.popular;t?i=`<div data-pid="${o}" class="swiper-slide">`:r&&(i=`<div data-pid="${o}" class="item-product">`);let u="";if(d){let e='<div class="item-product__labels">',t="</div>",r="";d.forEach((e=>{r+=`<div class="item-product__label item-product__label_${e.type}">${e.value}</div>`})),u+=e,u+=r,u+=t}let p="";p='<div class="item-product__prices">',p+=`<div class="item-product__price">Rp ${l}</div>`,a&&(p+=`<del class="item-product__price item-product__oldPrice">Rp ${a}</del>`),p+="</div>";let w="";w+=i,w+=` <a href="${n}" class="item-product__image">\n\t\t<img src="${s}" alt="${c}"></a>\n\t\t`,w+=`\n\t\t<p class="item-product__title">${c}</p>\n\t\t<p class="item-product__price">${l}</p>\n\t\t`,w+=p,w+='\n\t\t<div class="item-product__button">\n\t\t\t<button class="button-cart">В корзину</button>\n\t\t</div>\n\t\t',w+="</div>",t?(t.insertAdjacentHTML("beforeend",w),setTimeout((function(){swiper.update(swiper)}),500)):r&&r.insertAdjacentHTML("beforeend",w)}))}burger.onclick=function(){burger.classList.toggle("_active"),nav.classList.toggle("_active"),document.body.classList.toggle("_lock"),burgerContainer.classList.toggle("burgerContainer--right")},window.onload=function(){getProducts(),window.outerWidth>=windowTrigger&&swiperInit()};let swiper=null,windowTrigger=768,swiperContainer=document.querySelector(".swiper-container"),url=window.location.href,clean_url=url.replace(/(\\|\/)/g,"");function swiperInit(){swiper||(swiper=new Swiper(".swiper-container",{slidesPerView:3,loop:!0,direction:"horizontal",spaceBetween:50,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},scrollbar:{el:".swiper-scrollbar"}}))}function swiperDestroy(){swiper&&(swiper.destroy(),swiper=null)}console.log(swiper),onresize=function(){window.innerWidth>=windowTrigger?swiperInit():swiperDestroy()};